
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Resuscitation Network — People Map</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
<style>
  html, body { height: 100%; margin: 0; }
  #app { display: grid; grid-template-columns: 320px 1fr; height: 100%; }
  #sidebar { border-right: 1px solid #e5e7eb; padding: 16px; overflow: auto; font-family: system-ui, -apple-system, Segoe UI, Roboto, Inter, sans-serif; }
  #map { width: 100%; height: 100%; }
  h1 { font-size: 18px; margin: 0 0 8px; }
  .muted { color: #6b7280; }
  .search { display:flex; gap:8px; margin: 12px 0; }
  .search input { flex:1; padding:8px 10px; border:1px solid #d1d5db; border-radius: 8px; }
  .pill { display:inline-block; background:#eef2ff; color:#3730a3; padding:2px 8px; border-radius:999px; font-size:12px; margin-right:6px; }
  .card { border:1px solid #e5e7eb; border-radius:12px; padding:10px; margin-bottom:10px; }
  .card h3 { margin:0 0 4px; font-size:14px; }
  .small { font-size:12px; }
  .btn { padding:8px 10px; border:1px solid #d1d5db; background:#fff; border-radius:8px; cursor:pointer; }
  .btn:active { transform: translateY(1px); }
  .foot { font-size:12px; margin-top:12px; color:#6b7280; }
  @media (max-width: 900px) { #app { grid-template-columns: 1fr; } #sidebar { height: 40%; } #map { height: 60%; } }
</style>
</head>
<body>
<div id="app">
  <aside id="sidebar">
    <h1>Resuscitation Network — People</h1>
    <div class="muted small">Click pins or search by name, role, organisation, city, or interests.</div>
    <div class="search">
      <input id="q" type="search" placeholder="Search people… (e.g., 'rehabilitation', 'ERC', 'Copenhagen')" />
      <button class="btn" id="reset">Reset</button>
    </div>
    <div id="list"></div>
    <div class="foot small">⚠️ Location precision varies. County‑level or city‑centre pins are used when exact workplace coordinates are unclear.</div>
  </aside>
  <div id="map"></div>
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
<script>
const people = [{"name": "Stefan Jutterdal", "email": "stefanjutterdal@hotmail.com", "role": "Physiotherapist; patient/survivor advocate", "org": "Sweden (Kalmar region)", "city": "Kalmar", "country": "Sweden", "lat": 56.663444, "lng": 16.356779, "interests": "Person‑centred rehab; patient advocacy post‑cardiac event", "confidence": "Medium"}, {"name": "Johan Israelsson, RN PhD", "email": "johan.israelsson@regionkalmar.se", "role": "ICU nurse & researcher", "org": "Kalmar County Hospital / Linnaeus University", "city": "Kalmar", "country": "Sweden", "lat": 56.663444, "lng": 16.356779, "interests": "OHCA follow‑up; QoL; psychological outcomes", "confidence": "High"}, {"name": "Aymeric Lejeune", "email": "aymeric.lejeune@erc.edu", "role": "Network/Programme Lead", "org": "European Resuscitation Council (ERC)", "city": "Antwerp", "country": "Belgium", "lat": 51.219448, "lng": 4.402464, "interests": "Education networks; courses; ERC operations", "confidence": "High"}, {"name": "Federico Semeraro, MD", "email": "federico.semeraro@erc.edu", "role": "President; Anaesthesia & ICU / Prehospital emergency", "org": "European Resuscitation Council; Ospedale Maggiore Bologna", "city": "Bologna", "country": "Italy", "lat": 44.494887, "lng": 11.342616, "interests": "Resuscitation education; guidelines; bystander CPR", "confidence": "High"}, {"name": "Katie Dainty, PhD", "email": "katie.dainty@utoronto.ca", "role": "Research Chair in Patient‑Centred Outcomes", "org": "North York General Hospital & University of Toronto", "city": "Toronto", "country": "Canada", "lat": 43.6532, "lng": -79.3832, "interests": "Survivor & family experience; qualitative & mixed methods", "confidence": "High"}, {"name": "Freddy Lippert, MD", "email": "freddy.lippert@regionh.dk", "role": "EMS leader; former CEO, EMS Copenhagen", "org": "Capital Region of Denmark / Falck (previous)", "city": "Copenhagen", "country": "Denmark", "lat": 55.6761, "lng": 12.5683, "interests": "OHCA systems of care; dispatch; bystander activation", "confidence": "High"}, {"name": "Koenraad (Koen) Monsieurs, MD PhD", "email": "koen.monsieurs@rug.ac.be", "role": "Head of Emergency Medicine; Professor", "org": "Antwerp University Hospital (UZA) & University of Antwerp", "city": "Antwerp (Edegem)", "country": "Belgium", "lat": 51.156, "lng": 4.444, "interests": "ERC guidelines; ALS; airway; education", "confidence": "High"}, {"name": "Paul Swindell", "email": "paul.swindell@scauk.org", "role": "Founder/Chair; survivor advocate", "org": "Sudden Cardiac Arrest UK", "city": "Essex (approx.)", "country": "United Kingdom", "lat": 51.7356, "lng": 0.4686, "interests": "Peer support; lived experience; public engagement", "confidence": "High (person) / Medium (location)"}, {"name": "Dave Cleland", "email": "dave.a.cleland@gmail.com", "role": "OHCA survivor; storyteller", "org": "Sudden Cardiac Arrest UK", "city": "Essex (approx.)", "country": "United Kingdom", "lat": 51.7356, "lng": 0.4686, "interests": "Lived experience; survivor advocacy", "confidence": "High (person) / Medium (location)"}, {"name": "Esther Kuku", "email": "Esther.Kuku@resus.org.uk", "role": "Director of Communications & Engagement", "org": "Resuscitation Council UK", "city": "London", "country": "United Kingdom", "lat": 51.5074, "lng": -0.1278, "interests": "Public engagement; partnerships; comms", "confidence": "High"}, {"name": "Victoria Wragg, RN", "email": "Victoria.wragg@resus.org.uk", "role": "Clinical Lead", "org": "Resuscitation Council UK", "city": "London", "country": "United Kingdom", "lat": 51.5074, "lng": -0.1278, "interests": "Survivor pathways; quality standards; aftercare", "confidence": "High"}, {"name": "Lorenzo Gamberini, MD", "email": "lorenzo.gamberini@ausl.bologna.it", "role": "Anaesthesia & ICU; Prehospital emergency", "org": "Ospedale Maggiore Carlo Alberto Pizzardi", "city": "Bologna", "country": "Italy", "lat": 44.494887, "lng": 11.342616, "interests": "OHCA; prehospital systems; advanced life support", "confidence": "High"}, {"name": "Bo Gregers Winkel, MD DMSc", "email": "bowinkel@dadlnet.dk", "role": "Consultant cardiologist; Head of Research", "org": "Rigshospitalet / University of Copenhagen", "city": "Copenhagen", "country": "Denmark", "lat": 55.6761, "lng": 12.5683, "interests": "Sudden cardiac death; OHCA outcomes", "confidence": "High"}, {"name": "Guglielmo Imbriaco", "email": "guglielmo.imbriaco.work@gmail.com", "role": "Scientific Committee member", "org": "Italian Resuscitation Council (IRC)", "city": "Bologna (area)", "country": "Italy", "lat": 44.494887, "lng": 11.342616, "interests": "EMS; education; resuscitation science", "confidence": "High (person) / Medium (location)"}, {"name": "Katarina Heimburg", "email": "Katarina.heimburg@med.lu.se", "role": "Physiotherapist & researcher", "org": "Lund University / Skåne University Hospital", "city": "Lund", "country": "Sweden", "lat": 55.7047, "lng": 13.191, "interests": "Rehabilitation after OHCA; patient‑centred outcomes", "confidence": "High"}, {"name": "Nicole Marie Zerafa (likely)", "email": "Nclzerafa@gmail.com", "role": "Instructor; GP trainee; MRC contributor", "org": "Malta Resuscitation Council", "city": "Msida (University area)", "country": "Malta", "lat": 35.8959, "lng": 14.482, "interests": "Resuscitation education; community training", "confidence": "Medium"}, {"name": "Kirstie L. Haywood, PhD", "email": "k.l.haywood@warwick.ac.uk", "role": "Professor of Health Outcomes", "org": "Warwick Medical School", "city": "Coventry (Warwick campus)", "country": "United Kingdom", "lat": 52.383, "lng": -1.56, "interests": "PROMs; quality of life; survivorship", "confidence": "High"}, {"name": "Annette Waldemar", "email": "annette.waldemar@liu.se", "role": "Nurse specialist; researcher", "org": "Linköping University / Region Östergötland", "city": "Linköping", "country": "Sweden", "lat": 58.4108, "lng": 15.6214, "interests": "Family‑witnessed resuscitation; survivor needs", "confidence": "High"}, {"name": "Mette‑Kirstine Wagner", "email": "mette.kirstine.wagner@regionh.dk", "role": "Cardiology; survivorship & mental health", "org": "Rigshospitalet, Capital Region of Denmark", "city": "Copenhagen", "country": "Denmark", "lat": 55.6761, "lng": 12.5683, "interests": "Return‑to‑work; mental health after cardiac arrest", "confidence": "High"}, {"name": "Piritta Setälä", "email": "Piritta.setala@pirha.fi", "role": "Assistant Chief Physician (EMS)", "org": "Pirkanmaa Wellbeing Services County", "city": "Tampere", "country": "Finland", "lat": 61.4978, "lng": 23.761, "interests": "Physician‑staffed EMS; systems of care", "confidence": "High"}, {"name": "Marta Dembkowska (Przybył), MD", "email": "marta.dembkowska@gmail.com", "role": "Anaesthesiology & Intensive Care; ERC committees", "org": "Jagiellonian University Medical College", "city": "Kraków", "country": "Poland", "lat": 50.0647, "lng": 19.945, "interests": "Anaesthesia; resuscitation education", "confidence": "High (person) / Medium (email link)"}, {"name": "Tomasz Lonc, MD", "email": "tomasz.lonc@uj.edu.pl", "role": "Anaesthesiology & Intensive Therapy", "org": "Jagiellonian University Medical College", "city": "Kraków", "country": "Poland", "lat": 50.0647, "lng": 19.945, "interests": "Regional anaesthesia; ICU outcomes", "confidence": "Medium‑High"}, {"name": "Vicky (V. L.) Joshi, PhD", "email": "N/A", "role": "Lecturer in Physiotherapy", "org": "Glasgow Caledonian University", "city": "Glasgow", "country": "United Kingdom", "lat": 55.8642, "lng": -4.2518, "interests": "OHCA survivorship; rehabilitation", "confidence": "High"}, {"name": "Cyprus Resuscitation Council (KYSAN)", "email": "info@kysan.org", "role": "National resuscitation council (organisation)", "org": "KYSAN", "city": "Nicosia", "country": "Cyprus", "lat": 35.1856, "lng": 33.3823, "interests": "Training, guidelines implementation, public engagement in Cyprus", "confidence": "High"}, {"name": "Marco Mion, CPsychol", "email": "m.mion@nhs.net", "role": "Clinical Psychologist & Researcher", "org": "Mid and South Essex NHS FT — Essex Cardiothoracic Centre", "city": "Basildon", "country": "United Kingdom", "lat": 51.5685, "lng": 0.4578, "interests": "OHCA survivorship; neurorehabilitation; feedback systems; digital support (V‑CARE)", "confidence": "High"}, {"name": "Alexander Presciutti", "email": "N/A", "role": "Researcher (resuscitation/behavioural science)", "org": "Harvard Medical School", "city": "Boston", "country": "United States", "lat": 42.3364, "lng": -71.1046, "interests": "Resuscitation science; behavioural & outcomes research (details to confirm)", "confidence": "Medium"}];

const map = L.map('map', { scrollWheelZoom: true }).setView([52.0, 5.0], 4);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom: 19, attribution: '&copy; OpenStreetMap contributors' }).addTo(map);

const markers = [];
const markerGroup = L.layerGroup().addTo(map);

// simple de-overlap if two points share the exact same coords
const used = new Map();
function nudgeIfDuplicate(lat, lng) {
  const key = lat.toFixed(6) + ',' + lng.toFixed(6);
  if (!used.has(key)) { used.set(key, 0); return [lat, lng]; }
  const count = used.get(key) + 1;
  used.set(key, count);
  const delta = 0.02 * count; // ~2.2 km per 0.02 deg at these latitudes
  return [lat + delta, lng + delta];
}

function makePopup(p) {
  const lines = [
    `<strong>${p.name}</strong>`,
    p.role ? `<div>${p.role}</div>` : '',
    p.org ? `<div class="muted">${p.org}</div>` : '',
    `<div class="small">${p.city ? p.city + ', ' : ''}${p.country || ''}</div>`,
    p.interests ? `<div class="small"><span class="pill">interests</span> ${p.interests}</div>` : '',
    (p.email && p.email !== 'N/A') ? `<div class="small"><span class="pill">email</span> <a href="mailto:${p.email}">${p.email}</a></div>` : '',
    p.confidence ? `<div class="small muted">Confidence: ${p.confidence}</div>` : ''
  ].join('');
  return lines;
}

function addMarkers(data) {
  markerGroup.clearLayers();
  markers.length = 0;
  used.clear();
  data.forEach(p => {
    const [lat, lng] = nudgeIfDuplicate(p.lat, p.lng);
    const m = L.marker([lat, lng]).bindPopup(makePopup(p));
    m.on('click', () => {
      const el = document.querySelector(`[data-name="${p.name}"]`);
      if (el) { el.scrollIntoView({behavior: 'smooth', block: 'center'}); el.style.outline = '2px solid #6366f1'; setTimeout(() => el.style.outline='none', 1500); }
    });
    m.addTo(markerGroup);
    markers.push({ marker: m, data: p });
  });
}

function renderList(data) {
  const list = document.getElementById('list');
  list.innerHTML = data.map(p => {
    const emailLine = (p.email && p.email !== 'N/A') ? `<div class="small"><span class="pill">email</span> <a href="mailto:${p.email}">${p.email}</a></div>` : '';
    return `
      <div class="card" data-name="${p.name}">
        <h3>${p.name}</h3>
        <div class="small">${p.role || ''}</div>
        <div class="small muted">${p.org || ''}</div>
        <div class="small">${p.city ? p.city + ', ' : ''}${p.country || ''}</div>
        <div class="small"><span class="pill">interests</span> ${p.interests || ''}</div>
        ${emailLine}
        <div style="margin-top:6px;">
          <button class="btn" onclick="flyTo('${p.name}')">Show on map</button>
        </div>
      </div>
    `;
  }).join('');
}

function flyTo(name) {
  const item = markers.find(x => x.data.name === name);
  if (item) { map.flyTo(item.marker.getLatLng(), 8, { duration: 0.75 }); item.marker.openPopup(); }
}

function search(query) {
  const q = query.toLowerCase().trim();
  if (!q) return people;
  return people.filter(p => {
    const blob = [p.name, p.role, p.org, p.city, p.country, p.interests, p.email].join(' ').toLowerCase();
    return blob.includes(q);
  });
}

function applyFilter() {
  const q = document.getElementById('q').value;
  const filtered = search(q);
  addMarkers(filtered);
  renderList(filtered);
}

document.getElementById('q').addEventListener('input', applyFilter);
document.getElementById('reset').addEventListener('click', () => { document.getElementById('q').value=''; applyFilter(); });

addMarkers(people);
renderList(people);

const bounds = L.latLngBounds(people.map(p => [p.lat, p.lng]));
map.fitBounds(bounds.pad(0.2));
</script>
</body>
</html>
